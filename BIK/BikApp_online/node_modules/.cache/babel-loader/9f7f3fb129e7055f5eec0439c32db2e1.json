{"ast":null,"code":"var _jsxFileName = \"/Users/graj/projects/e-commerece/src/components/App.js\";\nimport React, { useState, useEffect, Fragment } from 'react';\nimport '../css/App.css';\nimport Header from './Header';\nimport Footer from './Footer';\nimport Signin from './Signin';\nimport Signup from './Signup';\nimport Menu from './Menu';\nimport ProductCard from './ProductCard';\nimport Filter from './Filter';\nimport Baskets from './Baskets';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\n\nfunction App() {\n  const [products, setProducts] = useState([]);\n  const [filteredProducts, setfilteredProducts] = useState([]);\n  const [search, setSearch] = useState(\"\");\n  const [cartItems, setCartItems] = useState([]); //Products\n\n  useEffect(() => {\n    fetch(\"http://localhost:8000/products/\").then(res => res.json()).then(jsonResponse => {\n      if (jsonResponse) {\n        setProducts(jsonResponse);\n        setfilteredProducts(jsonResponse);\n      }\n    });\n    return () => {};\n  }, []); //Local Storage\n\n  useEffect(() => {\n    if (localStorage.getItem(\"cartItems\")) {\n      setCartItems(JSON.parse(localStorage.getItem(\"cartItems\")));\n    }\n\n    return () => {\n      localStorage.getItem(\"cartItems\");\n      console.log(\"clean up\");\n    };\n  }, []); //Search \n\n  useEffect(() => {\n    setfilteredProducts([...products].filter(product => {\n      return product.title.toLowerCase().includes(search.toLowerCase());\n    }));\n    return () => {\n      console.log(\"clean up\");\n    };\n  }, [search, products]);\n\n  const handleSearch = value => {\n    setSearch(value);\n  };\n\n  const handleChangeSort = sort => {\n    if (sort !== '') {\n      const updated = [...products].sort((a, b) => {\n        return sort === \"lowest\" ? a.price > b.price ? 1 : -1 : a.price < b.price ? 1 : -1;\n      });\n      setfilteredProducts(updated);\n    } else {\n      const updated = [...products].sort((a, b) => {\n        return a.id < b.id ? 1 : -1;\n      });\n      setfilteredProducts(updated);\n    }\n  };\n\n  const onAddCart = product => {\n    const cartItem = cartItems;\n    let productAlreadyInCart = false;\n    cartItem.forEach(item => {\n      if (item.id === product.id) {\n        productAlreadyInCart = true;\n        item.count++;\n      }\n    });\n\n    if (!productAlreadyInCart) {\n      cartItem.push({ ...product,\n        count: 1\n      });\n    }\n\n    setCartItems([...cartItem]);\n    localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n  };\n\n  const onRemoveCart = removeItem => {\n    console.log(removeItem, \"asd\");\n    setCartItems([...cartItems].filter(item => {\n      if (item.id === removeItem.id && removeItem.count <= 1) return false;else {\n        if (item.id === removeItem.id && removeItem.count > 1) item.count--;\n        return true;\n      }\n    }));\n    localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n  };\n\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(BrowserRouter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    title: \"AGRI-Cart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    path: \"/signup\",\n    render: () => /*#__PURE__*/React.createElement(Signup, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 44\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/signin\",\n    render: () => /*#__PURE__*/React.createElement(Signin, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 44\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/products\",\n    render: () => /*#__PURE__*/React.createElement(ProductCard, {\n      products: filteredProducts,\n      onAddCart: onAddCart,\n      handleChangeSort: handleChangeSort,\n      handleSearch: handleSearch,\n      search: search,\n      cartItems: cartItems,\n      onRemoveCart: onRemoveCart,\n      onAddCart: onAddCart,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 46\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/graj/projects/e-commerece/src/components/App.js"],"names":["React","useState","useEffect","Fragment","Header","Footer","Signin","Signup","Menu","ProductCard","Filter","Baskets","BrowserRouter","Route","Switch","App","products","setProducts","filteredProducts","setfilteredProducts","search","setSearch","cartItems","setCartItems","fetch","then","res","json","jsonResponse","localStorage","getItem","JSON","parse","console","log","filter","product","title","toLowerCase","includes","handleSearch","value","handleChangeSort","sort","updated","a","b","price","id","onAddCart","cartItem","productAlreadyInCart","forEach","item","count","push","setItem","stringify","onRemoveCart","removeItem"],"mappings":"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","sourcesContent":["import React,{useState,useEffect, Fragment} from 'react';\nimport '../css/App.css';\nimport Header from './Header';\nimport Footer from './Footer';\nimport Signin from './Signin';\nimport Signup from './Signup';\nimport Menu from './Menu';\nimport ProductCard from './ProductCard';\nimport Filter from './Filter';\nimport Baskets from './Baskets';\nimport {BrowserRouter, Route, Switch} from 'react-router-dom';\n\n\nfunction App() {\n\n  const [products,setProducts] = useState([]);\n  const [filteredProducts, setfilteredProducts] = useState([]);\n  const [search, setSearch] = useState(\"\");\n  const [cartItems,setCartItems] = useState([]);\n  \n//Products\n useEffect(() => {\n    fetch(\"http://localhost:8000/products/\")\n      .then(res => res.json())\n      .then(jsonResponse => { \n        if(jsonResponse){\n          setProducts(jsonResponse);\n          setfilteredProducts(jsonResponse);\n        }\n      })\n      return () => {\n\n        }\n    }, []);\n\n  //Local Storage\n  useEffect(() => {\n    if(localStorage.getItem(\"cartItems\")){\n      setCartItems(JSON.parse(localStorage.getItem(\"cartItems\")));\n    }\n        return () => {\n          localStorage.getItem(\"cartItems\");\n          console.log(\"clean up\");\n        };\n    }, [])\n\n  //Search \n  useEffect(() => {\n    setfilteredProducts(\n        [...products].filter(product => {\n           return product.title.toLowerCase().includes(search.toLowerCase());\n        })\n    )\n    return () => {\n      console.log(\"clean up\");\n    };\n  }, [search,products])\n \n  const handleSearch = (value) => {\n    setSearch(value);\n  }\n  \n  const handleChangeSort = (sort) => {\n      if(sort!==''){\n          const updated =  [...products].sort((a,b) => {\n            return (sort===\"lowest\")?(a.price > b.price?1:-1):(a.price < b.price?1:-1);\n          });\n         setfilteredProducts(updated);\n      }\n      else{\n        const updated = [...products].sort((a,b)=> { return (a.id < b.id ?1:-1)});\n        setfilteredProducts(updated);\n      }\n  } \n\n  const onAddCart = (product) => {\n    const cartItem = cartItems;\n    let productAlreadyInCart = false;\n    cartItem.forEach(item => {\n        if(item.id===product.id){\n            productAlreadyInCart  = true;\n            item.count++;\n        }\n    })\n      if(!productAlreadyInCart){\n        cartItem.push({...product,count:1})\n      }\n    setCartItems([...cartItem]);\n    localStorage.setItem(\"cartItems\",JSON.stringify(cartItems));\n  }\n\n  const onRemoveCart = (removeItem) => {\n    console.log(removeItem,\"asd\")\n    setCartItems([...cartItems].filter(item => {\n        if(item.id===removeItem.id && removeItem.count<=1)\n          return false;\n        else{\n          if(item.id===removeItem.id && removeItem.count>1)\n            item.count--;\n          return true;\n        }\n    }));\n    localStorage.setItem(\"cartItems\",JSON.stringify(cartItems));\n  }\n\n  \n  return (\n    <Fragment>\n      <BrowserRouter>\n      <Header title=\"AGRI-Cart\"/>\n      <Switch>\n        <Route path=\"/signup\" render={()=> < Signup/>} />\n        <Route path=\"/signin\" render={()=> <Signin/>} />\n        <Route path=\"/products\" render={()=> <ProductCard  products={filteredProducts} onAddCart={onAddCart} handleChangeSort = {handleChangeSort} handleSearch = {handleSearch} search = {search} cartItems={cartItems} onRemoveCart = {onRemoveCart} onAddCart = {onAddCart} />} />\n\n      </Switch>\n           \n      <Footer/>\n      </BrowserRouter>\n    </Fragment>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}